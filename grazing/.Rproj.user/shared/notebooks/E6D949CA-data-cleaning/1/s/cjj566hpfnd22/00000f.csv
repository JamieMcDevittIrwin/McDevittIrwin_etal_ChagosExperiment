"0","# Convert to wide"
"0","test <- benthic.data %>%"
"0","  group_by(Name, Atoll, Site, Quadrat) %>%"
"0","  count(Label)"
"0",""
"0","test <- as.data.frame(test)"
"0",""
"0","test$Site.GoPro <- paste(test$Site, test$Quadrat, sep=""."")"
"0",""
"0",""
"0","benthic.wide <- test %>% "
"0","  pivot_wider(names_from = Label, "
"0","              values_from = n, "
"0","              values_fill = 0)"
"0",""
"0","dim(benthic.wide)"
"1","[1]"
"1"," 35"
"1"," 23"
"1","
"
"0","rowSums(benthic.wide[6:23])"
"1"," [1]"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1","
"
"1","[14]"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1","
"
"1","[27]"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1"," 50"
"1","
"
"0","# Filter out cover categories we don't want to include"
"0","benthic.wide.clean <- benthic.wide %>%"
"0","  dplyr::select(-c(""*TAPE"", ""PVC"", ""OOQ"")) "
"0",""
"0",""
"0","# Normalize by number of points"
"0","df1 <- benthic.wide.clean %>% "
"0","  column_to_rownames(var=""Site.GoPro"")%>% "
"0","  dplyr::select(c(""*CCAH"":""Soft""))"
"0","rowSums(df1) # all close to 50"
"1","          Il Lubine.I "
"1","
"
"1","                   50 "
"1","
"
"1","Il Anglaise Seaward.A "
"1","
"
"1","                   50 "
"1","
"
"1","Il Anglaise Seaward.B "
"1","
"
"1","                   50 "
"1","
"
"1","Il Anglaise Seaward.I "
"1","
"
"1","                   50 "
"1","
"
"1","         Il de rats.A "
"1","
"
"1","                   50 "
"1","
"
"1","         Il de rats.B "
"1","
"
"1","                   50 "
"1","
"
"1","         Il de rats.E "
"1","
"
"1","                   50 "
"1","
"
"1","         Il de rats.H "
"1","
"
"1","                   50 "
"1","
"
"1","   Il Poule Seaward.G "
"1","
"
"1","                   50 "
"1","
"
"1","   Il Poule Seaward.I "
"1","
"
"1","                   50 "
"1","
"
"1","          Il Lubine.A "
"1","
"
"1","                   50 "
"1","
"
"1","          Il Lubine.B "
"1","
"
"1","                   50 "
"1","
"
"1","          Il Lubine.H "
"1","
"
"1","                   47 "
"1","
"
"1","   Il Poule Seaward.D "
"1","
"
"1","                   50 "
"1","
"
"1","     Middle Brother.A "
"1","
"
"1","                   50 "
"1","
"
"1","     Middle Brother.E "
"1","
"
"1","                   48 "
"1","
"
"1","     Middle Brother.H "
"1","
"
"1","                   50 "
"1","
"
"1","     Middle Brother.I "
"1","
"
"1","                   50 "
"1","
"
"1","             Nelson.A "
"1","
"
"1","                   49 "
"1","
"
"1","             Nelson.B "
"1","
"
"1","                   49 "
"1","
"
"1","             Nelson.E "
"1","
"
"1","                   50 "
"1","
"
"1","             Nelson.G "
"1","
"
"1","                   50 "
"1","
"
"1","   Il Poule Seaward.A "
"1","
"
"1","                   47 "
"1","
"
"1","   Il Poule Seaward.B "
"1","
"
"1","                   50 "
"1","
"
"1"," Il Anglaise Lagoon.E "
"1","
"
"1","                   50 "
"1","
"
"1"," Il Anglaise Lagoon.H "
"1","
"
"1","                   49 "
"1","
"
"1","Il Anglaise Seaward.H "
"1","
"
"1","                   49 "
"1","
"
"1","         Il de rats.I "
"1","
"
"1","                   50 "
"1","
"
"1","          Il Lubine.E "
"1","
"
"1","                   50 "
"1","
"
"1","     Middle Brother.G "
"1","
"
"1","                   50 "
"1","
"
"1","             Nelson.D "
"1","
"
"1","                   50 "
"1","
"
"1"," Il Anglaise Lagoon.A "
"1","
"
"1","                   47 "
"1","
"
"1"," Il Anglaise Lagoon.B "
"1","
"
"1","                   49 "
"1","
"
"1"," Il Anglaise Lagoon.D "
"1","
"
"1","                   49 "
"1","
"
"1","Il Anglaise Seaward.E "
"1","
"
"1","                   50 "
"1","
"
"0","df2 <- decostand(df1, ""total"") "
"0","rowSums(df2) # 1"
"1","          Il Lubine.I "
"1","
"
"1","                    1 "
"1","
"
"1","Il Anglaise Seaward.A "
"1","
"
"1","                    1 "
"1","
"
"1","Il Anglaise Seaward.B "
"1","
"
"1","                    1 "
"1","
"
"1","Il Anglaise Seaward.I "
"1","
"
"1","                    1 "
"1","
"
"1","         Il de rats.A "
"1","
"
"1","                    1 "
"1","
"
"1","         Il de rats.B "
"1","
"
"1","                    1 "
"1","
"
"1","         Il de rats.E "
"1","
"
"1","                    1 "
"1","
"
"1","         Il de rats.H "
"1","
"
"1","                    1 "
"1","
"
"1","   Il Poule Seaward.G "
"1","
"
"1","                    1 "
"1","
"
"1","   Il Poule Seaward.I "
"1","
"
"1","                    1 "
"1","
"
"1","          Il Lubine.A "
"1","
"
"1","                    1 "
"1","
"
"1","          Il Lubine.B "
"1","
"
"1","                    1 "
"1","
"
"1","          Il Lubine.H "
"1","
"
"1","                    1 "
"1","
"
"1","   Il Poule Seaward.D "
"1","
"
"1","                    1 "
"1","
"
"1","     Middle Brother.A "
"1","
"
"1","                    1 "
"1","
"
"1","     Middle Brother.E "
"1","
"
"1","                    1 "
"1","
"
"1","     Middle Brother.H "
"1","
"
"1","                    1 "
"1","
"
"1","     Middle Brother.I "
"1","
"
"1","                    1 "
"1","
"
"1","             Nelson.A "
"1","
"
"1","                    1 "
"1","
"
"1","             Nelson.B "
"1","
"
"1","                    1 "
"1","
"
"1","             Nelson.E "
"1","
"
"1","                    1 "
"1","
"
"1","             Nelson.G "
"1","
"
"1","                    1 "
"1","
"
"1","   Il Poule Seaward.A "
"1","
"
"1","                    1 "
"1","
"
"1","   Il Poule Seaward.B "
"1","
"
"1","                    1 "
"1","
"
"1"," Il Anglaise Lagoon.E "
"1","
"
"1","                    1 "
"1","
"
"1"," Il Anglaise Lagoon.H "
"1","
"
"1","                    1 "
"1","
"
"1","Il Anglaise Seaward.H "
"1","
"
"1","                    1 "
"1","
"
"1","         Il de rats.I "
"1","
"
"1","                    1 "
"1","
"
"1","          Il Lubine.E "
"1","
"
"1","                    1 "
"1","
"
"1","     Middle Brother.G "
"1","
"
"1","                    1 "
"1","
"
"1","             Nelson.D "
"1","
"
"1","                    1 "
"1","
"
"1"," Il Anglaise Lagoon.A "
"1","
"
"1","                    1 "
"1","
"
"1"," Il Anglaise Lagoon.B "
"1","
"
"1","                    1 "
"1","
"
"1"," Il Anglaise Lagoon.D "
"1","
"
"1","                    1 "
"1","
"
"1","Il Anglaise Seaward.E "
"1","
"
"1","                    1 "
"1","
"
"0","# this creates a df with normalized cover categories"
"0",""
"0","# add back normalized data"
"0","meta <- benthic.wide.clean %>%"
"0","  select(c(Name:Site.GoPro))"
"0",""
"0","benthic_wide <- df2 %>%"
"0","  rownames_to_column(""Site.GoPro"") %>%"
"0","  left_join(meta, by=""Site.GoPro"") %>%"
"0","  select(c(Name:Quadrat), Site.GoPro, ""*CCAH"":""Soft"")"
"0",""
"0",""
"0",""
"0","# Add up Grazeable Substrate"
"0","colnames(benthic_wide)"
"1"," [1]"
"1"," ""Name""      "
"1"," ""Atoll""     "
"1"," ""Site""      "
"1","
"
"1"," [4]"
"1"," ""Quadrat""   "
"1"," ""Site.GoPro"""
"1"," ""*CCAH""     "
"1","
"
"1"," [7]"
"1"," ""*EMA""      "
"1"," ""*TURFH""    "
"1"," ""Hard""      "
"1","
"
"1","[10]"
"1"," ""Macro""     "
"1"," ""Sponge""    "
"1"," ""Turfsa""    "
"1","
"
"1","[13]"
"1"," ""*CCAR""     "
"1"," ""*TURFR""    "
"1"," ""ENMA_RUB""  "
"1","
"
"1","[16]"
"1"," ""TurfsaR""   "
"1"," ""MGSU""      "
"1"," ""OTH-SINV""  "
"1","
"
"1","[19]"
"1"," ""*UNK""      "
"1"," ""Soft""      "
"1","
"
"0","benthic.final <- benthic_wide %>%"
"0","  dplyr::mutate(Grazeable.substrate = c(`*CCAH` + `*EMA` + `*TURFH` + `*CCAR` + `*TURFR` + `Macro` + `Turfsa` +`ENMA_RUB` + `TurfsaR`)) %>%"
"0","  select(Site.GoPro, Grazeable.substrate) "
