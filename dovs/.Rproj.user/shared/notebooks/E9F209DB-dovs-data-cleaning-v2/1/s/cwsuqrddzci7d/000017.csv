"0",""
"0","#### Looking at Corallivores ####"
"0","# Add in the other corallivore data besides chaetodontidae"
"0","corallivore <- read.csv(""../data/traits/Chagos Fish Traits v2.xlsx - Corallivores.csv"", stringsAsFactors = FALSE)"
"0",""
"0","corallivore.1 <- corallivore %>%"
"0","  filter(X ==""Y"") %>%"
"0","  select(Full.Species.Name)"
"0",""
"0","# filter out corallivores from tile data"
"0","corallivore_data <- dovs.long %>%"
"0","  filter(Full.Species.Name %in% corallivore.1$Full.Species.Name | Family == ""Chaetodontidae"")"
"0",""
"0","corallivore_transect <- corallivore_data %>%"
"0","   group_by(OpCode_transect, OpCode_Site) %>% "
"0","  summarize(sum= sum(Abundance)) %>% # sum up all the corallivore species abundance per transect"
"0","  dplyr::rename(""corallivore""= ""sum"") %>%"
"0","  select(-OpCode_Site) %>%"
"0","  ungroup()"
"2","`summarise()` has grouped output by 'OpCode_transect'. You can override using the `.groups` argument."
"0","#### FAMILY LEVEL ####"
"0","dovs.wide.family <- dovs.long %>%"
"0","  # filter out herbivores, corallivores and mesopredators"
"0","  filter(Family %in% c(""Scaridae"", ""Acanthuridae"", ""Chaetodontidae"", "
"0","                       ""Lutjanidae"", ""Lethrinidae"", ""Haemulidae"",""Serranidae"", ""Carangidae"")) %>% "
"0","  # group by and summarize for each transect"
"0","  group_by(OpCode_transect, OpCode, OpCode_Site, Site, Atoll, Family, Shark_Sum_Abundance) %>% "
"0","  # sum up each family for each transect"
"0","  summarize(sum= sum(Abundance)) %>% "
"0","  # make it a wide df"
"0","  pivot_wider(names_from= Family, values_from= sum) %>%"
"0","  # add up mesopredators and herbivores"
"0","    mutate(Mesopredators = Serranidae + Haemulidae + Lutjanidae + Lethrinidae+ Carangidae) %>%"
"0","  mutate(Herbivores = Scaridae + Acanthuridae) %>%"
"0","  full_join(corallivore_transect, by=""OpCode_transect"")"
"2","`summarise()` has grouped output by 'OpCode_transect', 'OpCode', 'OpCode_Site', 'Site', 'Atoll', 'Family'. You can override using the `.groups` argument."
"0","dovs.wide.family <- as.data.frame(dovs.wide.family)"
"0",""
"0","# only four carangidae seen at all, so this doesn't really change our results"
"0","# when you go to the analysis, there is only one carangidae seen at all"
"0",""
