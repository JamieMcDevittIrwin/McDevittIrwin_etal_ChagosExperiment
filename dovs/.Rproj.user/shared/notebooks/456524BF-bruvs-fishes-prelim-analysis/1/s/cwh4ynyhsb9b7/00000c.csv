"0","# Need to filter out the OpCodes that Brett/Lauren analysed for fishes"
"0","# Brett:  016, 018, 019, 020, 086, 087, and 088."
"0","# Lauren: 001, 003, 004, 006, 007, 009, 011, 013, 014, 036, 041, 042, 055, 065, and 075"
"0","patterns <- c(""016"", ""018"", ""019"", ""020"", ""086"", ""087"", ""088"","
"0","              ""001"", ""003"", ""004"", ""006"", ""007"", ""009"", ""011"", "
"0","              ""013"", ""014"", ""036"", ""041"", ""042"", ""055"",""065"", ""075"")"
"0",""
"0","fishes_maxN_data <- fishes_maxN_data %>% "
"0","  filter(grepl(paste(patterns, collapse= ""|""), OpCode))"
"0",""
"0","# Get NAn values for every species that was not recorded at an OpCode, this creates a wide site by species matrix"
"0","fishes_maxN_data_wide <- reshape2::dcast(fishes_maxN_data, OpCode ~ Full.Species, value.var = 'MaxN')"
"0",""
"0","# seems like there is one fish that was unidentified or is an error? "
"0",""
"0","fishes_maxN_data_wide <- as.data.frame(fishes_maxN_data_wide)"
"0",""
"0","fishes_maxN_data_wide[is.na(fishes_maxN_data_wide)] <- 0"
"0",""
"0","# Create a long version"
"0","fishes_maxN_data_long <- reshape2::melt(fishes_maxN_data_wide, id.vars=""OpCode"", value.name= ""MaxN"", variable.name= ""Full.Species"")"
"0",""
"0","# Create metadata"
"0","fishes_maxN_data_long <- fishes_maxN_data_long %>% "
"0","  mutate(Atoll= sapply(OpCode, function(x) str_split(x, ""[_]"")[[1]][3]))"
"0",""
"0","fishes_maxN_data_long$Atoll <- as.factor(fishes_maxN_data_long$Atoll)"
"0",""
"0","fishes_maxN_data_long$Atoll[fishes_maxN_data_long$Atoll == ""EGMT""] <- ""EMGT"" "
"0",""
"0","fishes_maxN_data_long <- fishes_maxN_data_long %>% "
"0","  mutate(Family= sapply(Full.Species, "
"0","                  function(x) str_split(x, ""[ ]"")[[1]][1]))"
"0",""
"0",""
"0","# Filter out sites with too low of sample size "
"0","fishes_maxN_data_long <- fishes_maxN_data_long %>%"
"0","  filter(Atoll == c(""EMGT"", ""PBAN"", ""SALO""))"
"2","longer object length is not a multiple of shorter object length"
"2","longer object length is not a multiple of shorter object length"
"0","fishes_maxN_data_wide <- reshape2::dcast(fishes_maxN_data_long, OpCode ~ Full.Species, value.var = 'MaxN')"
"0",""
"0","fishes_maxN_data_wide <- as.data.frame(fishes_maxN_data_wide)"
"0",""
"0","fishes_maxN_data_wide[is.na(fishes_maxN_data_wide)] <- 0"
"0",""
"0",""
