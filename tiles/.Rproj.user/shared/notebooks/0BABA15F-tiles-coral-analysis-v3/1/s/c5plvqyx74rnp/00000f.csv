"0","# Prep the data"
"0","effectsize.df <- corals.2021_wide %>%"
"0","  filter(Treatment != ""Partial"") "
"0","effectsize.df$Treatment <-factor(effectsize.df$Treatment, levels = c(""Uncaged"",""Caged""))"
"0","effectsize.df <- as.data.frame(effectsize.df) "
"0",""
"0",""
"0","## Calculate the effect size for each site"
"0","tmp <- with(effectsize.df,"
"0","            by(effectsize.df, Site,"
"0","               function(x) cohen.d(x$All.Corals, x$Treatment, hedges.correction = TRUE)))"
"0",""
"0",""
"0","# Save the data for each site"
"0","hedges.pb.lagoon <- tmp$`Il Poule Lagoon`"
"0","hedges.pb.seaward  <- tmp$`Il Poule Seaward`"
"0","hedges.salo.seaward <- tmp$`Il Anglaise Seaward`"
"0","hedges.salo.lagoon <- tmp$`Il Anglaise Lagoon`"
"0","hedges.nelson <- tmp$Nelson"
"0","hedges.midbro <- tmp$`Middle Brother`"
"0","hedges.rats <-tmp$`Il de rats`"
"0","hedges.lubine <-tmp$`Il lubine`"
"0",""
"0",""
"0",""
"0","# Combine all together for plotting"
"0","Site <- c(""Il Poule Lagoon"", ""Il Poule Seaward"", ""Il Anglaise Seaward"", ""Il Anglaise Lagoon"", ""Nelson"", ""Middle Brother"", ""Il de rats"", ""Il lubine"")"
"0",""
"0","estimate <- c(hedges.pb.lagoon$estimate, hedges.pb.seaward$estimate, hedges.salo.seaward$estimate, "
"0","              hedges.salo.lagoon$estimate, hedges.nelson$estimate, hedges.midbro$estimate, hedges.rats$estimate, hedges.lubine$estimate)"
"0",""
"0","sd <- c(hedges.pb.lagoon$sd, hedges.pb.seaward$sd, hedges.salo.seaward$sd, "
"0","              hedges.salo.lagoon$sd, hedges.nelson$sd, hedges.midbro$sd, hedges.rats$sd, hedges.lubine$sd)"
"0",""
"0","hedges.df <- as.data.frame(cbind(Site, estimate, sd))"
"0","hedges.df$estimate <- as.numeric(hedges.df$estimate)"
"0","hedges.df$sd <- as.numeric(hedges.df$sd)"
"0",""
"0",""
"0",""
"0","# Prep the data so it has the same colors as the bruvs data"
"0","hedges.plot <- hedges.df %>%"
"0","  mutate(Atoll = ifelse(Site == ""Il Poule Lagoon"", ""Peros Banhos"", "
"0","                        ifelse(Site == ""Il Poule Seaward"", ""Peros Banhos"","
"0","                        ifelse(Site == ""Il Anglaise Seaward"", ""Salomon"","
"0","                               ifelse(Site == ""Il Anglaise Lagoon"", ""Salomon"","
"0","                                      ifelse(Site == ""Nelson"", ""Nelson"","
"0","                                             ifelse(Site== ""Middle Brother"", ""Brothers"","
"0","                                                    ""Egmont"")))))))"
"0",""
"0",""
"0","hedges.plot$Site <- factor(hedges.plot$Site, "
"0","                           levels=c(""Middle Brother"", ""Nelson"", ""Il Poule Lagoon"", "
"0","""Il Poule Seaward"", "
"0","""Il Anglaise Lagoon"", ""Il Anglaise Seaward"", ""Il de rats"", ""Il lubine""))"
"0",""
"0","hedges.plot$Atoll <- factor(hedges.plot$Atoll, levels=c(""Brothers"", ""Nelson"", ""Peros Banhos"", "
"0","""Salomon"", ""Egmont""))"
"0",""
"0",""
"0","# Effect size by site"
"0","p_tiles.effectsize <- ggplot(hedges.plot, aes(x=Site, y=estimate, col=Atoll)) +"
"0","   geom_point(size=6)+"
"0","  geom_errorbar(aes(ymin = estimate-sd, "
"0","                    ymax = estimate+sd), "
"0","                width=0.2) +"
"0","  labs (x= """", y= ""Coral Effect Size"") +"
"0","  theme_pubr() +"
"0","  geom_hline(yintercept= 0, linetype=2) +"
"0","    theme_pubr(base_size = 16) + "
"0","  theme(axis.text.x = element_blank())+"
"0","  scale_color_manual(values= c(""#440154FF"",""#3B528BFF"",""#21908CFF"",""#5DC863FF"",""#FDE725FF"")) +"
"0","  guides(col = ""none"")"
"0",""
"0","p_tiles.effectsize"
